{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.fill.js\";\nimport LoadingPage from \"@/components/LoadingPage.vue\";\nexport default {\n  name: \"PaintingPageSecond\",\n  components: {\n    LoadingPage: LoadingPage\n  },\n  props: [\"isPlaying\"],\n  data: function data() {\n    return {\n      ctx: null,\n      painting: false,\n      device: null,\n      size: 2.5,\n      color: \"#2c2c2c\",\n      showModal: false,\n      data: \"s\",\n      showPaint: true,\n      showLoading: false\n    };\n  },\n  methods: {\n    toggleModal: function toggleModal() {\n      this.showModal = !this.showModal;\n    },\n    //확인 모달 창\n    onClickSecond: function onClickSecond() {\n      var _this = this;\n      this.$emit(\"turnOffSound\");\n      var canvasContents = this.$refs.jsCanvas.toDataURL();\n      var cookie_userid = this.$cookies.get(\"userid\");\n      var file = JSON.stringify({\n        image: canvasContents,\n        userid: cookie_userid\n      });\n      fetch(\"http://localhost:3000/home/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: file\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response_json) {\n        console.log(response_json);\n        _this.data = \"1\";\n      });\n      this.showModal = false; //모달 닫기\n      this.showPaint = false;\n      this.showLoading = true;\n      //결과를 받으면 result를 보여주고 그이전까지는 로딩페이지를 보여준다\n    },\n    //클릭시 다음 페이지로 넘어가는 버튼\n    onMouseMove: function onMouseMove(event) {\n      var x = event.offsetX;\n      var y = event.offsetY;\n      if (!this.painting) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(x, y);\n      } else {\n        this.ctx.lineTo(x, y); // lineTo는 path의 이전 위치에서 지금 위치까지 선을 만드는 것\n        this.ctx.stroke();\n      }\n    },\n    onMouseDown: function onMouseDown() {\n      this.painting = true;\n    },\n    onMouseUp: function onMouseUp() {\n      this.painting = false;\n    },\n    stopPainting: function stopPainting() {\n      this.painting = false;\n    },\n    checkMobile: function checkMobile() {\n      if (/iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune|Lumia/g.test(navigator.userAgent)) {\n        this.device = \"mobile\";\n      } else {\n        this.device = \"etc\";\n      }\n      console.log(this.device);\n    },\n    resetCanvas: function resetCanvas() {\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\n      this.ctx.clearRect(0, 0, 700, 700);\n      this.ctx.fillStyle = \"white\";\n      this.ctx.fillRect(0, 0, 700, 700);\n    },\n    getTouchPos: function getTouchPos(e) {\n      return {\n        x: e.targetTouches[0].clientX - e.target.offsetLeft,\n        y: e.targetTouches[0].clientY - e.target.offsetTop + document.documentElement.scrollTop\n      };\n    },\n    touchStart: function touchStart(e) {\n      e.preventDefault();\n      this.painting = true;\n      var _this$getTouchPos = this.getTouchPos(e),\n        x = _this$getTouchPos.x,\n        y = _this$getTouchPos.y;\n      this.startX = x;\n      this.startY = y;\n    },\n    touchMove: function touchMove(e) {\n      if (!this.painting) return;\n      var _this$getTouchPos2 = this.getTouchPos(e),\n        x = _this$getTouchPos2.x,\n        y = _this$getTouchPos2.y;\n      this.ctx.lineTo(x, y);\n      this.ctx.stroke();\n      this.startX = x;\n      this.startY = y;\n    },\n    touchEnd: function touchEnd(e) {\n      if (!this.painting) return;\n      this.ctx.beginPath();\n      var _this$getTouchPos3 = this.getTouchPos(e),\n        x = _this$getTouchPos3.x,\n        y = _this$getTouchPos3.y;\n      this.startX = x;\n      this.startY = y;\n      this.ctx.arc(this.startX, this.startY, this.ctx.lineWidth / 2, 0, 2 * Math.PI);\n      this.ctx.fillStyle = this.ctx.strokeStyle;\n      this.ctx.fill();\n      this.painting = false;\n    },\n    handleColorClick: function handleColorClick(e) {\n      this.color = e.target.style.backgroundColor;\n      this.ctx.strokeStyle = this.color;\n    }\n  },\n  mounted: function mounted() {\n    this.checkMobile();\n    if (this.device === \"mobile\") {\n      // 모바일 버전\n      this.$refs.jsCanvas.width = 310;\n      this.$refs.jsCanvas.height = 465.3;\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\n      this.ctx.fillStyle = \"white\";\n      this.ctx.fillRect(0, 0, 700, 700);\n      this.ctx.strokeStyle = \"#2c2c2c\";\n      this.ctx.fillStyle = \"#2c2c2c\";\n      this.ctx.lineWidth = 2.5;\n      this.$refs.jsCanvas.addEventListener(\"touchmove\", this.touchMove, false);\n      this.$refs.jsCanvas.addEventListener(\"touchstart\", this.touchStart, false);\n      this.$refs.jsCanvas.addEventListener(\"touchend\", this.touchEnd, false);\n    } else {\n      this.$refs.jsCanvas.width = 700;\n      this.$refs.jsCanvas.height = 700;\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\n      this.ctx.fillStyle = \"white\";\n      this.ctx.fillRect(0, 0, 700, 700);\n      this.ctx.strokeStyle = \"#2c2c2c\";\n      this.ctx.fillStyle = \"#2c2c2c\";\n      this.ctx.lineWidth = 2.5;\n      this.$refs.jsCanvas.addEventListener(\"mousemove\", this.onMouseMove);\n      this.$refs.jsCanvas.addEventListener(\"mousedown\", this.onMouseDown);\n      this.$refs.jsCanvas.addEventListener(\"mouseup\", this.onMouseUp);\n\n      //아이패드는 크기는 크지만 모바일취급이 되어서, PC로 분류 하게끔 그냥 바꿨습니다.\n      this.$refs.jsCanvas.addEventListener(\"touchmove\", this.touchMove, false);\n      this.$refs.jsCanvas.addEventListener(\"touchstart\", this.touchStart, false);\n      this.$refs.jsCanvas.addEventListener(\"touchend\", this.touchEnd, false);\n    }\n  },\n  // size 변경을 감지하면 양방향 데이터 바인딩을 통해 사이즈 변경 값으로 선 굵기 변경\n  watch: {\n    size: function size() {\n      this.ctx.lineWidth = this.size;\n    },\n    color: function color() {\n      this.ctx.strokeStyle = this.color;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["LoadingPage","name","components","props","data","ctx","painting","device","size","color","showModal","showPaint","showLoading","methods","toggleModal","onClickSecond","$emit","canvasContents","$refs","jsCanvas","toDataURL","cookie_userid","$cookies","get","file","JSON","stringify","image","userid","fetch","method","headers","body","then","response","json","response_json","console","log","onMouseMove","event","x","offsetX","y","offsetY","beginPath","moveTo","lineTo","stroke","onMouseDown","onMouseUp","stopPainting","checkMobile","test","navigator","userAgent","resetCanvas","getContext","clearRect","fillStyle","fillRect","getTouchPos","e","targetTouches","clientX","target","offsetLeft","clientY","offsetTop","document","documentElement","scrollTop","touchStart","preventDefault","startX","startY","touchMove","touchEnd","arc","lineWidth","Math","PI","strokeStyle","fill","handleColorClick","style","backgroundColor","mounted","width","height","addEventListener","watch"],"sourceRoot":"","sources":["C:\\Users\\yoony\\OneDrive\\Desktop\\Github_folder\\ai-htp-project\\frontend\\src\\views\\Second\\PaintingPageSecond.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"showPaint\" class=\"painting-page\">\r\n    <div class=\"painting-content\">\r\n      <div id=\"canvas_Wrapper\">\r\n        <canvas ref=\"jsCanvas\" id=\"jsCanvas\" class=\"canvas\"></canvas>\r\n      </div>\r\n      <div class=\"controls\">\r\n        <div class=\"controls-container\">\r\n          <div class=\"controls__range\">\r\n            <input\r\n              type=\"range\"\r\n              id=\"jsRange\"\r\n              min=\"0.1\"\r\n              max=\"5\"\r\n              step=\"0.1\"\r\n              v-model=\"size\"\r\n            />\r\n          </div>\r\n          <div class=\"controls__btns\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"reset-btn\"\r\n              id=\"jsReset\"\r\n              @click=\"resetCanvas\"\r\n            >\r\n              <font-awesome-icon\r\n                class=\"reset-icon\"\r\n                icon=\"fa-solid fa-rotate-right\"\r\n              />\r\n            </button>\r\n          </div>\r\n          <button\r\n            v-if=\"isPlaying\"\r\n            @click=\"$emit('toggleSound1')\"\r\n            class=\"sound-btn1\"\r\n          >\r\n            <img class=\"icon-sound1\" src=\"../../assets/images/volumeon.png\" />\r\n          </button>\r\n          <button v-else @click=\"$emit('toggleSound1')\" class=\"sound-btn1\">\r\n            <img class=\"icon-sound1\" src=\"../../assets/images/volumeoff.png\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"controls__colors\" id=\"jsColors\" ref=\"jsColors\">\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #2c2c2c\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: white\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #ff3b30\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #ff9500\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #ffcc00\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #4cd963\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #5ac8fa\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #0579ff\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #5856d6\"\r\n          ></div>\r\n          <div\r\n            class=\"controls__color jsColor\"\r\n            @click=\"handleColorClick\"\r\n            style=\"background-color: #884d1d\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button type=\"button-next\" @click=\"toggleModal\" class=\"button-next\">\r\n      NEXT\r\n    </button>\r\n  </div>\r\n\r\n  <transition name=\"zoom\">\r\n    <div v-show=\"showModal\" class=\"overlay\">\r\n      <div v-show=\"showModal\" class=\"modal-container\">\r\n        <div class=\"modal-content\">\r\n          <p>그림을 이대로 <br />제출하시겠습니까?</p>\r\n        </div>\r\n        <div class=\"modal-btn-grid\">\r\n          <button @click=\"toggleModal\" class=\"modal-btn left\">취소</button>\r\n          <button @click=\"onClickSecond\" class=\"modal-btn\">확인</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n  <loading-page v-if=\"showLoading\" v-bind:data=\"data\"></loading-page>\r\n</template>\r\n\r\n<script>\r\nimport LoadingPage from \"@/components/LoadingPage.vue\";\r\n\r\nexport default {\r\n  name: \"PaintingPageSecond\",\r\n  components: { LoadingPage },\r\n  props: [\"isPlaying\"],\r\n  data() {\r\n    return {\r\n      ctx: null,\r\n      painting: false,\r\n      device: null,\r\n      size: 2.5,\r\n      color: \"#2c2c2c\",\r\n      showModal: false,\r\n      data: \"s\",\r\n      showPaint: true,\r\n      showLoading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    toggleModal() {\r\n      this.showModal = !this.showModal;\r\n    }, //확인 모달 창\r\n    onClickSecond() {\r\n      this.$emit(\"turnOffSound\");\r\n\r\n      var canvasContents = this.$refs.jsCanvas.toDataURL();\r\n      var cookie_userid = this.$cookies.get(\"userid\");\r\n      var file = JSON.stringify({\r\n        image: canvasContents,\r\n        userid: cookie_userid,\r\n      });\r\n      fetch(\"http://localhost:3000/home/\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: file,\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response_json) => {\r\n          console.log(response_json);\r\n          this.data = \"1\";\r\n        });\r\n\r\n      this.showModal = false; //모달 닫기\r\n      this.showPaint = false;\r\n      this.showLoading = true;\r\n      //결과를 받으면 result를 보여주고 그이전까지는 로딩페이지를 보여준다\r\n    }, //클릭시 다음 페이지로 넘어가는 버튼\r\n    onMouseMove(event) {\r\n      const x = event.offsetX;\r\n      const y = event.offsetY;\r\n\r\n      if (!this.painting) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(x, y);\r\n      } else {\r\n        this.ctx.lineTo(x, y); // lineTo는 path의 이전 위치에서 지금 위치까지 선을 만드는 것\r\n        this.ctx.stroke();\r\n      }\r\n    },\r\n    onMouseDown() {\r\n      this.painting = true;\r\n    },\r\n    onMouseUp() {\r\n      this.painting = false;\r\n    },\r\n    stopPainting() {\r\n      this.painting = false;\r\n    },\r\n    checkMobile() {\r\n      if (\r\n        /iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune|Lumia/g.test(\r\n          navigator.userAgent\r\n        )\r\n      ) {\r\n        this.device = \"mobile\";\r\n      } else {\r\n        this.device = \"etc\";\r\n      }\r\n      console.log(this.device);\r\n    },\r\n    resetCanvas() {\r\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\r\n      this.ctx.clearRect(0, 0, 700, 700);\r\n      this.ctx.fillStyle = \"white\";\r\n      this.ctx.fillRect(0, 0, 700, 700);\r\n    },\r\n    getTouchPos(e) {\r\n      return {\r\n        x: e.targetTouches[0].clientX - e.target.offsetLeft,\r\n        y:\r\n          e.targetTouches[0].clientY -\r\n          e.target.offsetTop +\r\n          document.documentElement.scrollTop,\r\n      };\r\n    },\r\n    touchStart(e) {\r\n      e.preventDefault();\r\n      this.painting = true;\r\n      const { x, y } = this.getTouchPos(e);\r\n      this.startX = x;\r\n      this.startY = y;\r\n    },\r\n    touchMove(e) {\r\n      if (!this.painting) return;\r\n      const { x, y } = this.getTouchPos(e);\r\n      this.ctx.lineTo(x, y);\r\n      this.ctx.stroke();\r\n      this.startX = x;\r\n      this.startY = y;\r\n    },\r\n    touchEnd(e) {\r\n      if (!this.painting) return;\r\n      this.ctx.beginPath();\r\n      const { x, y } = this.getTouchPos(e);\r\n      this.startX = x;\r\n      this.startY = y;\r\n      this.ctx.arc(\r\n        this.startX,\r\n        this.startY,\r\n        this.ctx.lineWidth / 2,\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n      this.ctx.fillStyle = this.ctx.strokeStyle;\r\n      this.ctx.fill();\r\n      this.painting = false;\r\n    },\r\n    handleColorClick(e) {\r\n      this.color = e.target.style.backgroundColor;\r\n      this.ctx.strokeStyle = this.color;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.checkMobile();\r\n\r\n    if (this.device === \"mobile\") {\r\n      // 모바일 버전\r\n      this.$refs.jsCanvas.width = 310;\r\n      this.$refs.jsCanvas.height = 465.3;\r\n\r\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\r\n      this.ctx.fillStyle = \"white\";\r\n      this.ctx.fillRect(0, 0, 700, 700);\r\n\r\n      this.ctx.strokeStyle = \"#2c2c2c\";\r\n      this.ctx.fillStyle = \"#2c2c2c\";\r\n      this.ctx.lineWidth = 2.5;\r\n\r\n      this.$refs.jsCanvas.addEventListener(\"touchmove\", this.touchMove, false);\r\n      this.$refs.jsCanvas.addEventListener(\r\n        \"touchstart\",\r\n        this.touchStart,\r\n        false\r\n      );\r\n      this.$refs.jsCanvas.addEventListener(\"touchend\", this.touchEnd, false);\r\n    } else {\r\n      this.$refs.jsCanvas.width = 700;\r\n      this.$refs.jsCanvas.height = 700;\r\n\r\n      this.ctx = this.$refs.jsCanvas.getContext(\"2d\");\r\n      this.ctx.fillStyle = \"white\";\r\n      this.ctx.fillRect(0, 0, 700, 700);\r\n\r\n      this.ctx.strokeStyle = \"#2c2c2c\";\r\n      this.ctx.fillStyle = \"#2c2c2c\";\r\n      this.ctx.lineWidth = 2.5;\r\n\r\n      this.$refs.jsCanvas.addEventListener(\"mousemove\", this.onMouseMove);\r\n      this.$refs.jsCanvas.addEventListener(\"mousedown\", this.onMouseDown);\r\n      this.$refs.jsCanvas.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n      //아이패드는 크기는 크지만 모바일취급이 되어서, PC로 분류 하게끔 그냥 바꿨습니다.\r\n      this.$refs.jsCanvas.addEventListener(\"touchmove\", this.touchMove, false);\r\n      this.$refs.jsCanvas.addEventListener(\r\n        \"touchstart\",\r\n        this.touchStart,\r\n        false\r\n      );\r\n      this.$refs.jsCanvas.addEventListener(\"touchend\", this.touchEnd, false);\r\n    }\r\n  },\r\n  // size 변경을 감지하면 양방향 데이터 바인딩을 통해 사이즈 변경 값으로 선 굵기 변경\r\n  watch: {\r\n    size() {\r\n      this.ctx.lineWidth = this.size;\r\n    },\r\n    color() {\r\n      this.ctx.strokeStyle = this.color;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n/* http://meyerweb.com/eric/tools/css/reset/\r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\r\n/*\r\n    브라우저마다 기존 값들이 달라서 내가 만든 화면과 다른 화면이 만들어질 수 있어서\r\n    설정값들을 전부 초기화 하는 것 같음.\r\n */\r\nhtml,\r\nbody,\r\ndiv,\r\nspan,\r\napplet,\r\nobject,\r\niframe,\r\nh1,\r\nh2,\r\nh3,\r\nh4,\r\nh5,\r\nh6,\r\np,\r\nblockquote,\r\npre,\r\na,\r\nabbr,\r\nacronym,\r\naddress,\r\nbig,\r\ncite,\r\ncode,\r\ndel,\r\ndfn,\r\nem,\r\nimg,\r\nins,\r\nkbd,\r\nq,\r\ns,\r\nsamp,\r\nsmall,\r\nstrike,\r\nstrong,\r\nsub,\r\nsup,\r\ntt,\r\nvar,\r\nb,\r\nu,\r\ni,\r\ncenter,\r\ndl,\r\ndt,\r\ndd,\r\nol,\r\nul,\r\nli,\r\nfieldset,\r\nform,\r\nlabel,\r\nlegend,\r\ntable,\r\ncaption,\r\ntbody,\r\ntfoot,\r\nthead,\r\ntr,\r\nth,\r\ntd,\r\narticle,\r\naside,\r\ncanvas,\r\ndetails,\r\nembed,\r\nfigure,\r\nfigcaption,\r\nfooter,\r\nheader,\r\nhgroup,\r\nmenu,\r\nnav,\r\noutput,\r\nruby,\r\nsection,\r\nsummary,\r\ntime,\r\nmark,\r\naudio,\r\nvideo {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  font-size: 100%;\r\n  font: inherit;\r\n  vertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle,\r\naside,\r\ndetails,\r\nfigcaption,\r\nfigure,\r\nfooter,\r\nheader,\r\nhgroup,\r\nmenu,\r\nnav,\r\nsection {\r\n  display: block;\r\n}\r\nbody {\r\n  line-height: 1;\r\n}\r\nol,\r\nul {\r\n  list-style: none;\r\n}\r\nblockquote,\r\nq {\r\n  quotes: none;\r\n}\r\nblockquote:before,\r\nblockquote:after,\r\nq:before,\r\nq:after {\r\n  content: \"\";\r\n  content: none;\r\n}\r\ntable {\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n}\r\nbody {\r\n  background-color: #f6f9fc;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 50px 0px;\r\n}\r\n.painting-page {\r\n  height: calc(var(--vh, 1vh) * 100);\r\n  position: relative;\r\n  background-color: #121212;\r\n}\r\n.painting-content {\r\n  padding-top: 30px;\r\n}\r\n.canvas {\r\n  width: 700px;\r\n  height: 700px;\r\n  background-color: white;\r\n  border-radius: 15px;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n}\r\n.sound-btn1 {\r\n  color: #ffffff;\r\n  border: none;\r\n  padding: 0;\r\n  display: inline-block;\r\n  background: none;\r\n  margin-top: -10px;\r\n  padding-left: 5px;\r\n}\r\n.icon-sound1 {\r\n  height: 40px;\r\n  color: #fff;\r\n}\r\n.controls {\r\n  margin-top: 80px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.controls-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.controls .controls__colors {\r\n  display: flex;\r\n}\r\n\r\n.controls__colors .controls__color {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n}\r\n.controls .controls__btns {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.controls__btns button {\r\n  all: unset;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  padding-left: 10px;\r\n}\r\n\r\n.controls__btns button:active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.controls .controls__range {\r\n  margin-bottom: 30px;\r\n}\r\nhtml {\r\n  cursor: url(\"../../assets/images/cursor.png\") 0 32, auto;\r\n}\r\n.button-next {\r\n  font-family: korFont2;\r\n  font-size: 30px;\r\n  position: relative;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  text-align: center;\r\n  background: none;\r\n  color: inherit;\r\n  border: none;\r\n  padding: 0;\r\n  cursor: pointer;\r\n  outline: inherit;\r\n  width: 80px;\r\n  top: 13px;\r\n}\r\n.reset-btn {\r\n  border: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: inline-block;\r\n  background: transparent;\r\n}\r\n.reset-icon {\r\n  color: #ffffff;\r\n  height: 30px;\r\n}\r\n/* 핸드폰 사이즈*/\r\n@media screen and (max-width: 450px) {\r\n  body {\r\n    align-items: center;\r\n    background-color: #333333;\r\n  }\r\n  .canvas {\r\n    width: 310px;\r\n    height: 465.3px;\r\n  }\r\n  .controls {\r\n    margin-top: 10px;\r\n  }\r\n  .controls .controls__range {\r\n    margin-bottom: 10px;\r\n  }\r\n  .controls .controls__btns {\r\n    margin-bottom: 10px;\r\n  }\r\n  .controls .controls__colors {\r\n    display: flex;\r\n    width: 90%;\r\n  }\r\n  .controls__colors .controls__color {\r\n    width: 36px;\r\n    height: 40px;\r\n    border-radius: 0px;\r\n  }\r\n}\r\n.overlay {\r\n  position: fixed; /* Positioning and size */\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100%;\r\n}\r\n.modal-container {\r\n  display: inline-block;\r\n  position: fixed;\r\n  width: 250px;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  text-align: center;\r\n  color: #000;\r\n  font-family: korFont2;\r\n  top: 40%;\r\n  left: 0;\r\n  right: 0;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\r\n  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\r\n  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\r\n  border-radius: 10px;\r\n  border: 1px solid rgba(0, 0, 0, 0.3);\r\n}\r\n.modal-container p {\r\n  margin: 30px;\r\n}\r\n.modal-content {\r\n  border-bottom: 1px solid #d0d0d0;\r\n  line-height: 1.5;\r\n}\r\n.modal-btn-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  overflow: hidden;\r\n}\r\n.modal-btn {\r\n  border-radius: 0 0 10px 0;\r\n  color: #5490ff;\r\n  background-color: #fff;\r\n  border: 0;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  outline: none;\r\n  min-height: 50px;\r\n  font-weight: 1000;\r\n}\r\n.modal-btn.left {\r\n  border-radius: 0 0 0 10px;\r\n  border-right: 1px solid #d0d0d0;\r\n}\r\n\r\n.results-data {\r\n  height: calc(var(--vh, 1vh) * 100);\r\n}\r\n\r\n.zoom-enter-active,\r\n.zoom-leave-active {\r\n  animation-duration: 0.21s;\r\n  animation-fill-mode: both;\r\n  animation-name: zoom;\r\n}\r\n.zoom-leave-active {\r\n  animation-direction: reverse;\r\n}\r\n@keyframes zoom {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale3d(1.1, 1.1, 1.1);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: scale3d(1, 1, 1);\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}